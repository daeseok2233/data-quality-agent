# dq-agent  
### Daily Data Quality Automation Agent

**매일 유입되는 CSV 데이터를 대상으로  
데이터 품질(결측·중복·이상치·비즈니스 룰 위반)을 자동 점검하는 도구입니다.**

분석·모델링 이전 단계에서  
데이터 상태를 **매일 자동으로 검증**합니다.

---

## ❓ Why dq-agent?

이 프로젝트는  
**모델을 최신 데이터로 지속적으로 업데이트하기 전에,  
데이터 전처리와 품질 검증을 자동화하기 위해 시작했습니다.**

일별 CSV 데이터에 대해  
결측, 중복, 이상치, 룰 위반 여부를 매번 수동으로 점검하는 과정을  
자동화하는 것이 목적입니다.

---

## 🎯 What it does

다음 **4가지 데이터 품질 항목**을 자동 점검합니다.

- **Missing**
  - 컬럼별 결측 개수/비율 계산
  - 결측이 포함된 행 추출

- **Duplicates**
  - `order_id` 기준 중복 행 탐지

- **Outlier (IQR)**
  - 수치 컬럼에 대해 IQR 기반 이상치 탐지

- **Business Rule**
  - 음수/0 값
  - `amount != quantity * unit_price`
  - 날짜 형식 오류
  - 기준일과 다른 날짜 데이터

모든 문제는 **행 단위로 분리되어 리포트로 출력**됩니다.

---

## 🔄 Data Flow (Input → Output)

### Input
- 일별 CSV 파일  
  예: `data/sales_YYYY_MM_DD.csv`

```csv
order_id,order_date,customer_id,product_id,quantity,unit_price,amount
1001,2025-10-25,C001,P001,2,30000,60000
1002,2025-10-25,C002,P002,1,15000,15000
1003,2025-10-24,C003,P001,3,30000,90000
1004,2025/10/25,,P003,5,50000,10
1005,2025-12-31,C005,P004,1,40000,40000
1006,2024-01-01,C006,P005,1,10000,10000
1007,2025-10-25,C007,P006,0,25000,0
1008,2025-10-25,C008,P007,-1,25000,-25000
1009,2025-10-25,C009,P008,2,0,0
1010,2025-10-25,C010,P009,1,9999999,9999999
1002,2025-10-25,C002,P002,1,15000,15000
1011,invalid_date,C011,P010,1,12000,12000
```
## 📊 Output

- `reports/quality_report_YYYY_MM_DD.md`
- `reports/quality_report_YYYY_MM_DD.json`
  
---

## AI 요약

## 요약
총 12건 데이터 중 1건(8.3%)에서 고객ID 결측이 발생했고, 2건의 중복 행이 존재한다. 수량, 단가, 금액 컬럼에서 각각 2건, 1건, 1건의 이상치가 발견되었다. 비즈니스 룰 위반 행은 13건으로, 0 또는 음수 값, 금액 불일치, 날짜 형식 오류, 기준일 불일치 문제가 다수 포함되어 있다. 가장 큰 리스크는 기준일 불일치(13건)와 0/음수 값(3건)이다.

## 권장 데이터 처리 정책
- 고객ID 결측 행은 분석 대상에서 제외한다.
- 중복(order_id 중복) 행은 최초 1건만 남기고 나머지는 제외한다.
- 수량, 단가, 금액 컬럼의 이상치 행은 별도 분리하여 추가 검증 후 처리한다.
- 0 또는 음수 수량, 단가, 금액 행은 정상 데이터에서 제외한다.
- 금액(amount) 불일치 행은 분석 대상에서 제외한다.
- 날짜 형식 오류 행은 분석 대상에서 제외한다.
- 기준일과 일치하지 않는(order_date가 기준일이 아닌) 행은 분석 대상에서 제외한다.
- 모든 처리 후 남은 데이터만 운영 및 분석에 활용한다.





리포트에는  
문제 유형별 요약과 **문제가 발생한 실제 행 데이터**가 포함됩니다.

---

## ⏰ Automation

Linux `cron`을 이용해 **매일 자동 실행**되도록 구성했습니다.

```bash
0 6 * * * /home/daeseok/dq-agent/run_daily.sh

```




